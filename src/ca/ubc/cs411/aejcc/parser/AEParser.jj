PARSER_BEGIN(AEParser)

package ca.ubc.cs411.aejcc.parser;

import ca.ubc.cs411.aejcc.ast.*;

public class AEParser {
}

PARSER_END(AEParser)

SKIP:
{
  " "
| "\n"
}

TOKEN:
{
  <LPAREN : "(">
| <RPAREN : ")">
| <ADD: "+">
| <SUB: "-">
| <NUM: (["0"-"9"])+>
}

/** Root production. */
AE Root():
{
    AE result;
}
{
    result = Expression() <EOF> { return result; }
}

AE Expression():
{
    Token t;
    AE a;
}
{
    t=<NUM> { return new Num(Integer.parseInt(t.image)); }
    | <LPAREN> a=Op() <RPAREN> { return a; }
}

AE Op():
{
    AE lhs, rhs;
}
{
    <ADD> lhs=Expression() rhs=Expression() { return new Add(lhs, rhs); }
    | <SUB> lhs=Expression() rhs=Expression() { return new Sub(lhs, rhs); }
}
